rules_version = '2';
service cloud.firestore {
  match /databases/{database}/documents {
    // Helper function to check if user is authenticated
    function isAuthenticated() {
      return request.auth != null;
    }

    // Helper function to check if the user matches the requested userId
    function isOwner(userId) {
      return request.auth.uid == userId;
    }

    // General rule: by default reject everything
    match /{document=**} {
      allow read, write: if false;
    }

    // Gigs: Allow all users (TEMPORARY: User needs to implement Auth)
    match /gigs/{gigId} {
      allow read, write: if true;
    }

    // Expenses: Allow all users (TEMPORARY)
    match /expenses/{expenseId} {
      allow read, write: if true;
    }
    
    // Monthly Instances: Allow all users (TEMPORARY)
    match /monthly_instances/{instanceId} {
      allow read, write: if true;
    }

    // Packages: Allow all users (TEMPORARY)
    match /packages/{packageId} {
      allow read, write: if true;
    }
    
    // Reward Notes: Allow all users (TEMPORARY)
    match /rewards_notes/{noteId} {
      allow read, write: if true;
    }

    // Users: Strict ownership check (Users usually implies Auth, keeping this strict or open? Let's keep strict if possible, or open if they haven't implemented auth yet. But 'users' implies auth entities. Let's make it open for now just in case.)
    match /users/{userId} {
      allow read, write: if true;
    }
  }
}
